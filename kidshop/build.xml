<?xml version="1.0" encoding="UTF-8"?>
<!-- for xml compliance -->
<!-- Generated By Kolor Panotour 1.8.0 -->
<krpano version="1.0.8.14" logkey="false" onstart="startaction">
    <action name="startaction">
		hidepanospotsaction();
	</action>
    <action name="mainloadpano">
		closepanoobjects();
		ifnot(stopSequence === undefined,interruptAnimation(););
		loadpano(%1,NULL,NULL,BLEND(1));
	</action>
    <!--************** KrPano plugins and datas ***************************************************-->
    <plugin name="data" firstPanoHasBeenPlayed="false" soundOn="true" keep="true"/>
    <!--************** Open the first pano ********************************************************-->
    <include url="build0.xml"/>
    <autorotate enabled="false"/>
    <plugin name="soundinterface" preload="true" url="builddata/graphics/soundinterface.swf" alturl="builddata/graphics/soundinterface.js" keep="true"/>
    <action name="playsoundaction">
		set(plugin[data].soundOn, true);
		playpanosounds(forcesounds);
	</action>
    <action name="stopsoundaction">
		set(plugin[data].soundOn, false);
		stoppanosounds();
	</action>
    <!--************** Fonts **********************************************************************-->
    <textstyle name="DEFAULT" bold="false" font="Arial Narrow" fontsize="16" italic="false" textcolor="0xff000000"/>
    <!--************** Introduction ***************************************************************-->
    <action name="fromlittleplanetintrotonormalview">
		tweennormalview();
		set(hotspot[logo0].visible, true);
		showpanospotsaction();
	</action>
    <action name="firstloadcompleteaction">
		if(plugin[data].firstPanoHasBeenPlayed==false,
			setlittleplanet();
			wait(load);
			set(plugin[data].firstPanoHasBeenPlayed,true);
			startLittlePlanetIntroEffect();
		);
	</action>
    <action name="startLittlePlanetIntroEffect">
		if(plugin[data].firstPanoHasBeenPlayed == true,
			delayedcall(1.0,
				fromlittleplanetintrotonormalview();
				set(autorotate.enabled,true);
			);
		);
	</action>
    <action name="setlittleplanet">
		set(view.stereographic, true);
		set(view.fisheye      , 1.0);
		set(view.limitview    , lookat);
		set(view.vlookatmin   , -90);
		set(view.vlookatmax   , 90);
		set(view.fov          , 150);
		set(view.fovmax       , 150);
		set(view.hlookat      , 0);
		set(view.vlookat      , 90);
		set(display.flash10   , off);
		set(display.details   , 14);
	</action>
    <!--************** Logos **********************************************************************-->
    <plugin name="logo3" url="builddata/graphics/logo3.png" keep="true" align="lefttop" x="10" y="10" width="446" height="prop" onclick="openurl(http://www.deardetki.ru/,_blank)"/>
    <hotspot visible="false" name="logo0" url="builddata/graphics/logo0.png" keep="true" ath="0" atv="90" width="300" height="prop" onclick="openurl(http://www.avvgeo.ru/,_blank)"/>
    <!--************** Menu ***********************************************************************-->
    <plugin name="in" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(fov_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(fov_moveforce,0);" url="builddata/graphics/menu/menu0.png" width="40" x="-180" y="10"/>
    <plugin name="out" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(fov_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(fov_moveforce,0);" url="builddata/graphics/menu/menu1.png" width="40" x="-140" y="10"/>
    <plugin name="left" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(hlookat_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(hlookat_moveforce,0);" url="builddata/graphics/menu/menu2.png" width="40" x="-100" y="10"/>
    <plugin name="right" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(hlookat_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(hlookat_moveforce,0);" url="builddata/graphics/menu/menu3.png" width="40" x="-60" y="10"/>
    <plugin name="up" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(vlookat_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(vlookat_moveforce,0);" url="builddata/graphics/menu/menu4.png" width="40" x="-20" y="10"/>
    <plugin name="down" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(vlookat_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(vlookat_moveforce,0);" url="builddata/graphics/menu/menu5.png" width="40" x="20" y="10"/>
    <plugin name="home" align="bottom" crop="0|0|65|65" height="prop" keep="true" onclick="lookto(get(panoview.h),get(panoview.v),get(panoview.fov),smooth(100,20,50));" onout="" onover="" onovercrop="0|65|65|65" url="builddata/graphics/menu/menu6.png" width="40" x="60" y="10"/>
    <plugin name="openfs" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="set(fullscreen,true);" onout="" onover="" onovercrop="0|65|65|65" url="builddata/graphics/menu/menu7.png" width="40" x="100" y="10"/>
    <plugin name="closefs" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="set(fullscreen,false);" onout="" onover="" onovercrop="0|65|65|65" url="builddata/graphics/menu/menu8.png" visible="false" width="40" x="100" y="10"/>
    <plugin name="soundON" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="playsoundaction();set(plugin[soundON].visible,false); set(plugin[soundOFF].visible,true);" onout="" onover="" onovercrop="0|65|65|65" url="builddata/graphics/menu/menu9.png" visible="false" width="40" x="140" y="10"/>
    <plugin name="soundOFF" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="stopsoundaction();set(plugin[soundOFF].visible,false); set(plugin[soundON].visible,true);" onovercrop="0|65|65|65" url="builddata/graphics/menu/menu10.png" visible="true" width="40" x="140" y="10"/>
    <plugin name="autorotationON" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="switch(autorotate.enabled);set(plugin[autorotationON].visible,false); set(plugin[autorotationOFF].visible,true);" onout="" onover="" onovercrop="0|65|65|65" url="builddata/graphics/menu/menu11.png" visible="" width="40" x="180" y="10"/>
    <plugin name="autorotationOFF" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="switch(autorotate.enabled);set(plugin[autorotationOFF].visible,false); set(plugin[autorotationON].visible,true);" onovercrop="0|65|65|65" url="builddata/graphics/menu/menu12.png" visible="" width="40" x="180" y="10"/>
    <events onenterfullscreen="set(plugin[openfs].visible,false); set(plugin[closefs].visible,true);" onexitfullscreen="set(plugin[openfs].visible,true); set(plugin[closefs].visible,false);"/>
    <!--************** Background sound ***********************************************************-->
    <action name="playbackgroundsound">
		if(%1 == none,
			stopallsounds();
			set(plugin[soundinterface].background,%1);
			,
			if(plugin[soundinterface].background == %1,
				if (%3 == forcesounds,
					stopallsounds();playsound(backgroundsound,%1,%2);
				)
				,
				stopallsounds();playsound(backgroundsound,%1,%2);
				set(plugin[soundinterface].background,%1);
			)
		);
	</action>
    <action name="stopbackgroundsound">
		stopsound(backgroundsound);
	</action>
    <!--************** Sequence animation *********************************************************-->
    <action name="animate">
		if (stopSequence == false,
			inc(hotspot[%1].frame,1,get(hotspot[%1].lastframe),0);
			mul(hotspot[%1].ypos,hotspot[%1].frame,hotspot[%1].frameheight);
			txtadd(hotspot[%1].crop,'0|',get(hotspot[%1].ypos),'|',get(hotspot[%1].framewidth),'|',get(hotspot[%1].frameheight));
			delayedcall(%2, animate(%1,%2) );
		);
	</action>
    <!-- Raise sequence stopper and wait sequence time to break the delayed calls -->
    <action name="interruptAnimation">
		ifnot (stopSequence === undefined,
			set(stopSequence, true);
			wait(0.1);
		);
	</action>
</krpano>