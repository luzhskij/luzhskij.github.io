<?xml version="1.0" encoding="UTF-8"?>
<!-- for xml compliance -->
<!-- Generated By Kolor Panotour 1.8.0 -->
<krpano version="1.0.8.14" logkey="false" onstart="startaction">
    <action name="startaction">
		hidepanospotsaction();
	</action>
    <action name="mainloadpano">
		closepanoobjects();
		ifnot(stopSequence === undefined,interruptAnimation(););
		loadpano(%1,NULL,NULL,BLEND(1));
	</action>
    <!--************** KrPano plugins and datas ***************************************************-->
    <plugin name="data" firstPanoHasBeenPlayed="false" introImageHasBeenPlayed="false" keep="true"/>
    <!--************** Open the first pano ********************************************************-->
    <include url="5550.xml"/>
    <autorotate enabled="false"/>
    <!--************** Fonts **********************************************************************-->
    <textstyle name="DEFAULT" bold="false" font="Arial Narrow" fontsize="16" italic="false" textcolor="0xff000000"/>
    <!--************** Introduction ***************************************************************-->
    <action name="fromlittleplanetintrotonormalview">
		tweennormalview();
		set(hotspot[logo0].visible, true);
		showpanospotsaction();
	</action>
    <action name="firstloadcompleteaction">
		if(plugin[data].firstPanoHasBeenPlayed==false,
			setlittleplanet();
			wait(load);
			set(plugin[data].firstPanoHasBeenPlayed,true);
			if (plugin[data].introImageHasBeenPlayed == true, startLittlePlanetIntroEffect(););
		);
	</action>
    <action name="startLittlePlanetIntroEffect">
		if(plugin[data].firstPanoHasBeenPlayed == true,
			delayedcall(1.0,
				fromlittleplanetintrotonormalview();
				set(autorotate.enabled,true);
			);
		);
	</action>
    <action name="setlittleplanet">
		set(view.stereographic, true);
		set(view.fisheye      , 1.0);
		set(view.limitview    , lookat);
		set(view.vlookatmin   , -90);
		set(view.vlookatmax   , 90);
		set(view.fov          , 150);
		set(view.fovmax       , 150);
		set(view.hlookat      , 0);
		set(view.vlookat      , 90);
		set(display.flash10   , off);
		set(display.details   , 14);
	</action>
    <plugin name="introimage" url="555data/graphics/menu/help.png" align="center" onclick="hideintroimage();" onloaded="autohideintroimage();"/>
    <action name="hideintroimage">
		if(plugin[introimage].enabled,	set(plugin[introimage].enabled,false);tween(plugin[introimage].alpha, 0.0, 0.5, default, removeplugin(introimage)););
		startLittlePlanetIntroEffect();
	</action>
    <action name="autohideintroimage">
		if(plugin[data].introImageHasBeenPlayed==false, 	set(plugin[introimage].alpha,0); tween(plugin[introimage].alpha,1.0,WAIT);
		set(plugin[data].introImageHasBeenPlayed,true););
	</action>
    <!--************** Logos **********************************************************************-->
    <hotspot visible="false" name="logo0" url="555data/graphics/logo0.png" keep="true" ath="0" atv="90" width="300" height="prop" onclick="openurl(http://3d-tour360.ru/,_blank)"/>
    <!--************** Lensflares *****************************************************************-->
    <lensflareset name="DEFAULT" url="555data/graphics/flares.jpg"/>
    <!--************** Menu ***********************************************************************-->
    <plugin name="in" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(fov_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(fov_moveforce,0);" url="555data/graphics/menu/menu0.png" width="40" x="-180" y="10"/>
    <plugin name="out" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(fov_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(fov_moveforce,0);" url="555data/graphics/menu/menu1.png" width="40" x="-140" y="10"/>
    <plugin name="left" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(hlookat_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(hlookat_moveforce,0);" url="555data/graphics/menu/menu2.png" width="40" x="-100" y="10"/>
    <plugin name="right" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(hlookat_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(hlookat_moveforce,0);" url="555data/graphics/menu/menu3.png" width="40" x="-60" y="10"/>
    <plugin name="up" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(vlookat_moveforce,-1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(vlookat_moveforce,0);" url="555data/graphics/menu/menu4.png" width="40" x="-20" y="10"/>
    <plugin name="down" align="bottom" crop="0|0|65|65" height="prop" keep="true" ondown="set(vlookat_moveforce,+1);" onout="" onover="" onovercrop="0|65|65|65" onup="set(vlookat_moveforce,0);" url="555data/graphics/menu/menu5.png" width="40" x="20" y="10"/>
    <plugin name="home" align="bottom" crop="0|0|65|65" height="prop" keep="true" onclick="lookto(get(panoview.h),get(panoview.v),get(panoview.fov),smooth(100,20,50));" onout="" onover="" onovercrop="0|65|65|65" url="555data/graphics/menu/menu6.png" width="40" x="60" y="10"/>
    <plugin name="openfs" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="set(fullscreen,true);" onout="" onover="" onovercrop="0|65|65|65" url="555data/graphics/menu/menu7.png" width="40" x="100" y="10"/>
    <plugin name="closefs" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="set(fullscreen,false);" onout="" onover="" onovercrop="0|65|65|65" url="555data/graphics/menu/menu8.png" visible="false" width="40" x="100" y="10"/>
    <plugin name="autorotationON" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="switch(autorotate.enabled);set(plugin[autorotationON].visible,false); set(plugin[autorotationOFF].visible,true);" onout="" onover="" onovercrop="0|65|65|65" url="555data/graphics/menu/menu9.png" visible="" width="40" x="140" y="10"/>
    <plugin name="autorotationOFF" align="bottom" blendmode="normal" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="switch(autorotate.enabled);set(plugin[autorotationOFF].visible,false); set(plugin[autorotationON].visible,true);" onovercrop="0|65|65|65" url="555data/graphics/menu/menu10.png" visible="" width="40" x="140" y="10"/>
    <plugin name="info" align="bottom" crop="0|0|65|65" customColor="true" height="prop" keep="true" onclick="displayHelp();" onout="" onover="" onovercrop="0|65|65|65" url="555data/graphics/menu/menu11.png" width="40" x="180" y="10"/>
    <plugin name="helpScreen" align="center" customColor="true" keep="true" onclick="closeHelp();" url="555data/graphics/menu/help.png" visible="false"/>
    <action name="displayHelp">
        set(plugin[helpScreen].visible,true);
        set(plugin[info].onclick,closeHelp();)
    </action>
    <action name="closeHelp">
        set(plugin[helpScreen].visible,false);
        set(plugin[info].onclick,displayHelp();)
    </action>
    <events onenterfullscreen="set(plugin[openfs].visible,false); set(plugin[closefs].visible,true);" onexitfullscreen="set(plugin[openfs].visible,true); set(plugin[closefs].visible,false);"/>
    <!--************** Thumbnail plugin ***********************************************************-->
    <events name="thumbnailsResizeEvent" onresize="thumbsResizeEventHandler();"/>
    <!-- action performed when mouse hovers over a thumbnail preview -->
    <action name="magnify">
		tween(plugin[%1].alpha,  1.0, 0.3, easeInQuad);
		tween(plugin[%1].scale, 1.05, 0.3, easeInQuad);
	</action>
    <!-- action performed when mouse goes away from a thumbnail preview -->
    <action name="lie">
		tween(plugin[%1].alpha, 0.8, 0.3, easeInQuad);
		tween(plugin[%1].scale, 1.0, 0.3, easeInQuad);
	</action>
    <!-- open the thumbnail -->
    <action name="slide_action_in">
		set(plugin[slide].onclick,slide_action_out);
		set(plugin[strap].onclick,slide_action_out);
		set(plugin[strapArrow].rotate,180);
		tween(plugin[thumbArray].y, 10%, 1, easeOutQuint);
		tween(plugin[thumbMovePrev].y, 5%, 1, easeOutQuint);
		tween(plugin[thumbMoveNext].y, 5%,1, easeOutQuint);
		thumbsResizeEventHandler();
	</action>
    <!-- close the thumbnail -->
    <action name="slide_action_out">
		set(plugin[slide].onclick,slide_action_in);
		set(plugin[strap].onclick,slide_action_in);
		set(plugin[strapArrow].rotate,0);
		tween(plugin[thumbArray].y, 0, 1, easeOutQuint);
		tween(plugin[thumbMovePrev].y, 0, 1, easeOutQuint);
		tween(plugin[thumbMoveNext].y, 0, 1, easeOutQuint);
		set(plugin[thumbMovePrev].visible,false);
		set(plugin[thumbMoveNext].visible,false);
	</action>
    <action name="moveThumbsPrev">
		plugin[thumbArray].updatepos();
		copy(truethumbswidth, plugin[thumbArray].pixelwidth);
		if (area.pixelwidth GT truethumbswidth,
		set(plugin[thumbBgLayout].x, 0);,
		set(leftborder, get(area.pixelwidth));
		sub(leftborder, truethumbswidth);
		div(leftborder, 2);
		mul(leftborder, -1);
		if (plugin[thumbBgLayout].x LT leftborder, inc(plugin[thumbBgLayout].x, %1););
		if (plugin[thumbBgLayout].x GT leftborder, set(plugin[thumbBgLayout].x, get(leftborder)););
		);
	</action>
    <action name="moveThumbsNext">
		plugin[thumbArray].updatepos();
		copy(truethumbswidth, plugin[thumbArray].pixelwidth);
		if (area.pixelwidth GT truethumbswidth,
		set(plugin[thumbBgLayout].x, 0);,
		set(rightborder, get(area.pixelwidth));
		sub(rightborder, truethumbswidth);
		div(rightborder, 2);
		if (plugin[thumbBgLayout].x GT rightborder, dec(plugin[thumbBgLayout].x, %1););
		if (plugin[thumbBgLayout].x LT rightborder, set(plugin[thumbBgLayout].x, get(rightborder)););
		);
	</action>
    <action name="thumbsResizeEventHandler">
		plugin[thumbArray].updatepos();
		copy(truethumbswidth, plugin[thumbArray].pixelwidth);
		if (area.pixelwidth GT truethumbswidth,
		set(plugin[thumbBgLayout].x, 0);displayThumbsScrolls(false);,
		if (plugin[slide].onclick == slide_action_out, displayThumbsScrolls(true););
		);
	</action>
    <action name="displayThumbsScrolls">
		set(plugin[thumbMovePrev].visible, %1);
		set(plugin[thumbMovePrev].enabled, %1);
		set(plugin[thumbMoveNext].visible, %1);
		set(plugin[thumbMoveNext].enabled, %1);
	</action>
    <action name="adjusthtml5thumbsplugins">
		if (ishtml5 == true,
		set(plugin[thumbMovePrev].width, 5%);
		set(plugin[thumbMoveNext].width, 5%);
		);
	</action>
    <plugin name="thumbArray" keep="true" zorder="1" url="555data/graphics/transparent.png" handcursor="false" capture="false" children="true" alpha="0.9" blendmode="normal" smoothing="true" x="0" y="0" scale="1" align="bottom" edge="top" width="prop" height="10%"/>
    <plugin name="thumbBgLayout" keep="true" zorder="1" url="555data/graphics/transparent.png" handcursor="false" capture="false" x="0" y="0" align="center" edge="center" width="prop" height="100%" parent="thumbArray"/>
    <plugin name="thumbMovePrev" keep="true" zorder="3" capture="true" url="555data/graphics/thumb_scroll.png" alpha="0.8" onover="set(alpha, 1);" onout="set(alpha,0.8);set(scrollspeed,10);" scrollspeed="10" onhover="moveThumbsPrev(get(scrollspeed));if(scrollspeed LT 70, inc(scrollspeed););" onclick="moveThumbsPrev(50);" visible="false" x="10" y="0" align="bottomleft" edge="left"/>
    <plugin name="thumbMoveNext" keep="true" zorder="3" capture="true" url="555data/graphics/thumb_scroll.png" alpha="0.8" onover="set(alpha, 1);" onout="set(alpha,0.8);set(scrollspeed,10);" scrollspeed="10" onhover="moveThumbsNext(get(scrollspeed));if(scrollspeed LT 70, inc(scrollspeed););" onclick="moveThumbsNext(50);" visible="false" x="10" y="0" align="bottomright" edge="right"/>
    <plugin name="thumbMovePrevArrow" parent="thumbMovePrev" keep="true" zorder="3" capture="false" url="555data/graphics/arrow.png" x="0" y="0" align="center" edge="center" rotate="180"/>
    <plugin name="thumbMoveNextArrow" parent="thumbMoveNext" keep="true" zorder="3" capture="false" url="555data/graphics/arrow.png" x="0" y="0" align="center" edge="center"/>
    <plugin name="slide" parent="thumbArray" keep="true" zorder="0" url="555data/graphics/slide.png" handcursor="false" capture="false" children="true" alpha="0.9" blendmode="normal" smoothing="true" x="0" y="0" align="top" edge="top" width="4000" height="100%" onclick="slide_action_in"/>
    <plugin name="strap" keep="true" zorder="0" url="555data/graphics/strap.png" parent="thumbArray" alpha="0.9" align="top" edge="left" rotate="-90" handcursor="true" onclick="slide_action_in"/>
    <plugin name="strapArrow" keep="true" parent="strap" zorder="0" url="555data/graphics/arrow.png" align="center" edge="center" capture="false" enabled="false" rotate="0"/>
    <!-- thumbs pictures -->
    <plugin name="thumb_5550" keep="true" zorder="2" parent="thumbBgLayout" url="555data/graphics/5550_thumbnail.jpg" width="12.8205%" height="prop" align="topleft" edge="center" x="7.69231%" y="50%" alpha="0.8" onclick="mainloadpano(5550.xml);" onover="magnify('thumb_5550'); " onhover="showtext(1);" onout="lie('thumb_5550');" visible="false" onloaded="thumbloaded();"/>
    <plugin name="thumb_5551" keep="true" zorder="2" parent="thumbBgLayout" url="555data/graphics/5551_thumbnail.jpg" width="12.8205%" height="prop" align="topleft" edge="center" x="21.7949%" y="50%" alpha="0.8" onclick="mainloadpano(5551.xml);" onover="magnify('thumb_5551'); " onhover="showtext(2);" onout="lie('thumb_5551');" visible="false" onloaded="thumbloaded();"/>
    <plugin name="thumb_5552" keep="true" zorder="2" parent="thumbBgLayout" url="555data/graphics/5552_thumbnail.jpg" width="12.8205%" height="prop" align="topleft" edge="center" x="35.8974%" y="50%" alpha="0.8" onclick="mainloadpano(5552.xml);" onover="magnify('thumb_5552'); " onhover="showtext(3);" onout="lie('thumb_5552');" visible="false" onloaded="thumbloaded();"/>
    <plugin name="thumb_5553" keep="true" zorder="2" parent="thumbBgLayout" url="555data/graphics/5553_thumbnail.jpg" width="12.8205%" height="prop" align="topleft" edge="center" x="50%" y="50%" alpha="0.8" onclick="mainloadpano(5553.xml);" onover="magnify('thumb_5553'); " onhover="showtext(4);" onout="lie('thumb_5553');" visible="false" onloaded="thumbloaded();"/>
    <plugin name="thumb_5554" keep="true" zorder="2" parent="thumbBgLayout" url="555data/graphics/5554_thumbnail.jpg" width="12.8205%" height="prop" align="topleft" edge="center" x="64.1026%" y="50%" alpha="0.8" onclick="mainloadpano(5554.xml);" onover="magnify('thumb_5554'); " onhover="showtext(5);" onout="lie('thumb_5554');" visible="false" onloaded="thumbloaded();"/>
    <plugin name="thumb_5555" keep="true" zorder="2" parent="thumbBgLayout" url="555data/graphics/5555_thumbnail.jpg" width="12.8205%" height="prop" align="topleft" edge="center" x="78.2051%" y="50%" alpha="0.8" onclick="mainloadpano(5555.xml);" onover="magnify('thumb_5555'); " onhover="showtext(6);" onout="lie('thumb_5555');" visible="false" onloaded="thumbloaded();"/>
    <plugin name="thumb_5556" keep="true" zorder="2" parent="thumbBgLayout" url="555data/graphics/5556_thumbnail.jpg" width="12.8205%" height="prop" align="topleft" edge="center" x="92.3077%" y="50%" alpha="0.8" onclick="mainloadpano(5556.xml);" onover="magnify('thumb_5556'); " onhover="showtext(7);" onout="lie('thumb_5556');" visible="false" onloaded="thumbloaded();"/>
    <plugin name="thumbnailsData" keep="true" nbThumbnailsLoaded="0"/>
    <action name="thumbloaded">
		inc(plugin[thumbnailsData].nbThumbnailsLoaded, 1);
		if(plugin[thumbnailsData].nbThumbnailsLoaded GE 7,
		setThumbnailsVisible();
		adjusthtml5thumbsplugins();
		);
	</action>
    <action name="setThumbnailsVisible">
		set(plugin[thumb_5550].visible, true);
		set(plugin[thumb_5551].visible, true);
		set(plugin[thumb_5552].visible, true);
		set(plugin[thumb_5553].visible, true);
		set(plugin[thumb_5554].visible, true);
		set(plugin[thumb_5555].visible, true);
		set(plugin[thumb_5556].visible, true);
	</action>
    <!--************** Sequence animation *********************************************************-->
    <action name="animate">
		if (stopSequence == false,
			inc(hotspot[%1].frame,1,get(hotspot[%1].lastframe),0);
			mul(hotspot[%1].ypos,hotspot[%1].frame,hotspot[%1].frameheight);
			txtadd(hotspot[%1].crop,'0|',get(hotspot[%1].ypos),'|',get(hotspot[%1].framewidth),'|',get(hotspot[%1].frameheight));
			delayedcall(%2, animate(%1,%2) );
		);
	</action>
    <!-- Raise sequence stopper and wait sequence time to break the delayed calls -->
    <action name="interruptAnimation">
		ifnot (stopSequence === undefined,
			set(stopSequence, true);
			wait(0.1);
		);
	</action>
</krpano>